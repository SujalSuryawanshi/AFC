{% extends 'base.html' %}
{% load math_filters %}
{% block body-class %}
all
{% endblock body-class %}
{% block content %}
<br><br><br>
<br><br><br>

<div class="receipt-container">
    <div class="receipt-header">
        <h2>ğŸ§¾ Order Receipt</h2>
        <p><b><strong>Order:</strong> #{{ order.order_number }}</b></p>
        <p><strong>Placed At:</strong> {{ order.created_at }}</p>
        <p>
            <strong>Status:</strong>
            <span class="status-icon">
                {% if order.status == 'in_process' %} â³ In Process
                {% elif order.status == 'on_way' %} ğŸšš On the way
                {% elif order.status == 'done' %} âœ… Prepared
                {% elif order.status == 'cancelled' %}
                    âŒ Cancelled <br>
                    <small>(Refund will be processed within 5-7 business days, with a small deduction of Razorpay fee. Help us create our own platform to remove this charge ğŸ¥º!)</small><br>
                    <a href="https://razorpay.me/@sujalsuryawanshi" class="btn btn-outline-warning mt-2" target="_blank">Donate ğŸ˜‡</a>
                {% endif %}
            </span>
        </p>
    </div>

    {% if cart_items %}
    <table class="table receipt-table">
        <thead>
            <tr>
                <th>Item</th>
                <th>Price (â‚¹)</th>
                <th>Qty</th>
                <th>Total (â‚¹)</th>
            </tr>
        </thead>
        <tbody>
            {% for item in cart_items %}
                {% if item.quantity > 0 %}
                    <tr>
                        <td>{{ item.product.name }}</td>
                        <td>{{ item.price|div:item.quantity }}</td>
                        <td>{{ item.quantity }}</td>
                        <td>{{ item.price }}</td>
                    </tr>
                {% endif %}
            {% endfor %}
        </tbody>
    </table>
    <hr>
    <p class="text-end fw-bold fs-5">Grand Total: â‚¹{{ order_total }}</p>
    {% else %}
    <p>No items found for this order.</p>
    {% endif %}

    <div class="quote-box" id="quoteBox"></div>
</div>

<br><br>

<script>
    const quotes = [
        "Your order is being preparedâ€¦ unlike your life decisionsğŸ˜®â€ğŸ’¨.",
        "They said good things take time. Your food took that personally ğŸ¤·â€â™‚ï¸.",
        "Relax, itâ€™s cooking. Not a Marvel movie plot twist ğŸ•¶.",
        "If waiting burned calories, you'd be fit by now ğŸ¤¦â€â™‚ï¸.",
        "Your foodâ€™s not late. Itâ€™s just making a dramatic entrance ğŸ˜.",
        "We promise, no chefs were harmed (emotionally) while making your food ğŸ˜¤.",
        "Your order is spicier than your ex's DMs ğŸ¥µ.",
        "Your food is in the oven, not a time machine. Chill out! â³.",
        "Cooking time: longer than your last relationship ğŸ’”.",
        "Your food is being prepared with love... and a bit of chaos ğŸ˜….",
        "Your order is like a fine wine: it takes time to mature ğŸ·.",
        "Your food is being cooked with the precision of a surgeon... or a toddler with a crayon ğŸ¨.",
        "Cooking speed: somewhere between a sloth and government paperwork ğŸ™„.",
        "Waiting builds character. And hunger. Mostly hunger ğŸ¤”ğŸ¤·â€â™‚ï¸.",
        "Weâ€™re not slow. Weâ€™re justâ€¦ flavor marinating enthusiasts ğŸ˜¤ğŸ˜¤.",
        "This food is being slow-cooked. Like my will to do cardio ğŸ˜….",
        "Hang tight! Your taste buds are about to be promoted ğŸ˜œ.",
        "Your meal is being handcrafted like a precious piece of art ğŸ˜‡.",
        "Warning: Mouth-watering levels approaching critical ğŸ˜‰."
    ];

    document.getElementById('quoteBox').innerText = "ğŸ´ " + quotes[Math.floor(Math.random() * quotes.length)];
</script>

<script>
    setInterval(() => {
        window.location.reload();
    }, 5000);
</script>

{% endblock %}